{"version":3,"file":"index.mjs","sources":["../lib/validate.js","../lib/sample1.js","../lib/correction.js","../lib/sample2.js","../lib/binomial.js","../lib/factory.js","../lib/index.js","../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isPositiveInteger = require( '@stdlib/assert-is-positive-integer' ).isPrimitive;\nvar isProbability = require( '@stdlib/assert-is-probability' ).isPrimitive;\nvar format = require( '@stdlib/string-format' );\n\n\n// MAIN //\n\n/**\n* Validates parameters.\n*\n* @private\n* @param {PositiveInteger} n - number of trials\n* @param {Probability} p - success probability\n* @returns {(Error|null)} error or null\n*\n* @example\n* var err = validate( 10, 0.5 );\n* if ( err ) {\n*     throw err;\n* }\n*/\nfunction validate( n, p ) {\n\tif ( !isPositiveInteger( n ) ) {\n\t\treturn new TypeError( format( 'invalid argument. First argument must be a positive integer. Value: `%s`.', p ) );\n\t}\n\tif ( !isProbability( p ) ) {\n\t\treturn new TypeError( format( 'invalid argument. Second argument must be a probability. Value: `%s`.', p ) );\n\t}\n\treturn null;\n}\n\n\n// EXPORTS //\n\nmodule.exports = validate;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Generates a binomially distributed pseudorandom number by computing the sum of Bernoulli random variables.\n*\n* @private\n* @param {PRNG} rand - PRNG for uniformly distributed numbers\n* @param {PositiveInteger} n - number of trials\n* @param {Probability} p - success probability\n* @returns {NonNegativeInteger} pseudorandom number\n*/\nfunction sample( rand, n, p ) {\n\tvar sum = 0;\n\tvar i;\n\tfor ( i = 0; i < n; i++ ) {\n\t\tif ( rand() <= p ) {\n\t\t\tsum += 1;\n\t\t}\n\t}\n\treturn sum;\n}\n\n\n// EXPORTS //\n\nmodule.exports = sample;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar pow = require( '@stdlib/math-base-special-pow' );\n\n\n// VARIABLES //\n\nvar ONE_12 = 1.0 / 12.0;\nvar ONE_360 = 1.0 / 360.0;\nvar ONE_1260 = 1.0 / 1260.0;\n\n\n// MAIN //\n\n/**\n* Returns a correction for Stirling's approximation.\n*\n* @private\n* @param {NonNegativeInteger} k - input argument\n* @returns {number} correction term\n*\n* @example\n* var c = correction( 0 );\n* // returns 0.08106146679532726\n*/\nfunction correction( k ) {\n\tvar v;\n\tswitch ( k ) {\n\tcase 0:\n\t\treturn 0.08106146679532726;\n\tcase 1:\n\t\treturn 0.04134069595540929;\n\tcase 2:\n\t\treturn 0.02767792568499834;\n\tcase 3:\n\t\treturn 0.02079067210376509;\n\tcase 4:\n\t\treturn 0.01664469118982119;\n\tcase 5:\n\t\treturn 0.01387612882307075;\n\tcase 6:\n\t\treturn 0.01189670994589177;\n\tcase 7:\n\t\treturn 0.01041126526197209;\n\tcase 8:\n\t\treturn 0.009255462182712733;\n\tcase 9:\n\t\treturn 0.008330563433362871;\n\tdefault:\n\t\tk += 1;\n\t\tv = pow( k, 2 );\n\t\treturn (ONE_12 - ((ONE_360 - (ONE_1260/v)) / v)) / k;\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = correction;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar floor = require( '@stdlib/math-base-special-floor' );\nvar sign = require( '@stdlib/math-base-special-signum' );\nvar sqrt = require( '@stdlib/math-base-special-sqrt' );\nvar abs = require( '@stdlib/math-base-special-abs' );\nvar ln = require( '@stdlib/math-base-special-ln' );\nvar correction = require( './correction.js' );\n\n\n// VARIABLES //\n\nvar ONE_SIXTH = 1.0 / 6.0;\n\n\n// MAIN //\n\n/**\n* Generates a binomially distributed pseudorandom number.\n*\n* ## References\n*\n* -   Hörmann, Wolfgang. 1993. \"The generation of binomial random variates.\" _Journal of Statistical Computation and Simulation_ 46 (1-2): 101–10. doi:[10.1080/00949659308811496][@hormann:1993a].\n*\n* [@hormann:1993a]: http://dx.doi.org/10.1080/00949659308811496\n*\n* @private\n* @param {PRNG} rand - PRNG for uniformly distributed numbers\n* @param {PositiveInteger} n - number of trials\n* @param {Probability} p - success probability\n* @returns {NonNegativeInteger} pseudorandom number\n*/\nfunction sample( rand, n, p ) {\n\tvar alpha;\n\tvar urvr;\n\tvar snpq;\n\tvar npq;\n\tvar rho;\n\tvar tmp;\n\tvar nm;\n\tvar nr;\n\tvar us;\n\tvar km;\n\tvar nk;\n\tvar vr;\n\tvar a;\n\tvar b;\n\tvar c;\n\tvar f;\n\tvar h;\n\tvar i;\n\tvar k;\n\tvar m;\n\tvar q;\n\tvar r;\n\tvar t;\n\tvar u;\n\tvar v;\n\tvar x;\n\n\tm = floor( (n + 1) * p );\n\tnm = n - m + 1;\n\n\tq = 1.0 - p;\n\n\tr = p / q;\n\tnr = (n + 1) * r;\n\n\tnpq = n * p * q;\n\tsnpq = sqrt( npq );\n\n\tb = 1.15 + (2.53 * snpq);\n\ta = -0.0873 + (0.0248*b) + (0.01*p);\n\tc = (n*p) + 0.5;\n\n\talpha = (2.83 + (5.1/b)) * snpq;\n\n\tvr = 0.92 - (4.2/b);\n\turvr = 0.86 * vr;\n\n\th = (m + 0.5) * ln( (m+1) / (r*nm) );\n\th += correction( m ) + correction( n-m );\n\n\twhile ( true ) {\n\t\tv = rand();\n\t\tif ( v <= urvr ) {\n\t\t\tu = (v/vr) - 0.43;\n\t\t\tr = (u * ( (2.0*a / (0.5 - abs(u))) + b )) + c;\n\t\t\treturn floor( r );\n\t\t}\n\t\tif ( v >= vr ) {\n\t\t\tu = rand() - 0.5;\n\t\t} else {\n\t\t\tu = (v/vr) - 0.93;\n\t\t\tu = (sign( u ) * 0.5) - u;\n\t\t\tv = vr * rand();\n\t\t}\n\t\tus = 0.5 - abs(u);\n\t\tk = floor( (u * ( (2.0*a/us) + b )) + c );\n\t\tif ( k < 0 || k > n ) {\n\t\t\t// Try again...\n\t\t\tcontinue;\n\t\t}\n\t\tv = v * alpha / ( (a/(us*us)) + b );\n\t\tkm = abs( k - m );\n\t\tif ( km > 15 ) {\n\t\t\tv = ln( v );\n\t\t\trho = km / npq;\n\t\t\ttmp = ( (km/3) + 0.625 ) * km;\n\t\t\ttmp += ONE_SIXTH;\n\t\t\ttmp /= npq;\n\t\t\trho *= tmp + 0.5;\n\t\t\tt = -(km * km) / (2.0 * npq);\n\t\t\tif ( v < t - rho ) {\n\t\t\t\treturn k;\n\t\t\t}\n\t\t\tif ( v <= t + rho ) {\n\t\t\t\tnk = n - k + 1;\n\t\t\t\tx = h + ( (n+1)*ln( nm/nk ) );\n\t\t\t\tx += (k+0.5) * ln( nk*r/(k+1) );\n\t\t\t\tx += -(correction( k ) + correction( n-k ));\n\t\t\t\tif ( v <= x ) {\n\t\t\t\t\treturn k;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tf = 1.0;\n\t\t\tif ( m < k ) {\n\t\t\t\tfor ( i = m; i <= k; i++ ) {\n\t\t\t\t\tf *= (nr/i) - r;\n\t\t\t\t}\n\t\t\t} else if ( m > k ) {\n\t\t\t\tfor ( i = k; i <= m; i++ ) {\n\t\t\t\t\tv *= (nr/i) - r;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( v <= f ) {\n\t\t\t\treturn k;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = sample;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar sample1 = require( './sample1.js' );\nvar sample2 = require( './sample2.js' );\n\n\n// MAIN //\n\n/**\n* Returns a pseudorandom number drawn from a binomial distribution.\n*\n* @private\n* @param {PRNG} rand - PRNG for uniformly distributed numbers\n* @param {PositiveInteger} n - number of trials\n* @param {Probability} p - probability of success\n* @returns {NonNegativeInteger} pseudorandom number\n*/\nfunction sample( rand, n, p ) {\n\tif ( p > 0.5 ) {\n\t\treturn n - sample( rand, n, 1.0-p );\n\t}\n\tif ( n*p < 10.0 ) {\n\t\treturn sample1( rand, n, p );\n\t}\n\treturn sample2( rand, n, p );\n}\n\n\n// EXPORTS //\n\nmodule.exports = sample;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar setReadOnly = require( '@stdlib/utils-define-nonenumerable-read-only-property' );\nvar setReadOnlyAccessor = require( '@stdlib/utils-define-nonenumerable-read-only-accessor' );\nvar setReadWriteAccessor = require( '@stdlib/utils-define-nonenumerable-read-write-accessor' );\nvar isObject = require( '@stdlib/assert-is-plain-object' );\nvar isFunction = require( '@stdlib/assert-is-function' );\nvar hasOwnProp = require( '@stdlib/assert-has-own-property' );\nvar constantFunction = require( '@stdlib/utils-constant-function' );\nvar noop = require( '@stdlib/utils-noop' );\nvar isnan = require( '@stdlib/math-base-assert-is-nan' );\nvar isPositiveInteger = require( '@stdlib/math-base-assert-is-positive-integer' );\nvar isProbability = require( '@stdlib/math-base-assert-is-probability' );\nvar randu = require( '@stdlib/random-base-mt19937' ).factory;\nvar typedarray2json = require( '@stdlib/array-to-json' );\nvar format = require( '@stdlib/string-format' );\nvar validate = require( './validate.js' );\nvar binomial0 = require( './binomial.js' );\n\n\n// MAIN //\n\n/**\n* Returns a pseudorandom number generator for generating binomially distributed random numbers.\n*\n* @param {PositiveInteger} [n] - number of trials\n* @param {Probability} [p] - success probability\n* @param {Options} [options] - function options\n* @param {PRNG} [options.prng] - pseudorandom number generator which generates uniformly distributed pseudorandom numbers\n* @param {PRNGSeedMT19937} [options.seed] - pseudorandom number generator seed\n* @param {PRNGStateMT19937} [options.state] - pseudorandom number generator state\n* @param {boolean} [options.copy=true] - boolean indicating whether to copy a provided pseudorandom number generator state\n* @throws {TypeError} `n` must be a positive integer\n* @throws {TypeError} `p` must be a probability\n* @throws {TypeError} options argument must be an object\n* @throws {TypeError} must provide valid options\n* @throws {Error} must provide a valid state\n* @returns {PRNG} pseudorandom number generator\n*\n* @example\n* var binomial = factory( 17, 0.5 );\n* var v = binomial();\n* // returns <number>\n*\n* @example\n* var binomial = factory( 8, 0.8, {\n*     'seed': 297\n* });\n* var v = binomial();\n* // returns <number>\n*\n* @example\n* var binomial = factory();\n* var v = binomial( 20, 0.5 );\n* // returns <number>\n*/\nfunction factory() {\n\tvar opts;\n\tvar rand;\n\tvar prng;\n\tvar err;\n\tvar n;\n\tvar p;\n\n\tif ( arguments.length === 0 ) {\n\t\trand = randu();\n\t} else if ( arguments.length === 1 ) {\n\t\topts = arguments[ 0 ];\n\t\tif ( !isObject( opts ) ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. Options argument must be an object. Value: `%s`.', opts ) );\n\t\t}\n\t\tif ( hasOwnProp( opts, 'prng' ) ) {\n\t\t\tif ( !isFunction( opts.prng ) ) {\n\t\t\t\tthrow new TypeError( format( 'invalid option. `prng` option must be a pseudorandom number generator function. Option: `%s`.', opts.prng ) );\n\t\t\t}\n\t\t\trand = opts.prng;\n\t\t} else {\n\t\t\trand = randu( opts );\n\t\t}\n\t} else {\n\t\tn = arguments[ 0 ];\n\t\tp = arguments[ 1 ];\n\t\terr = validate( n, p );\n\t\tif ( err ) {\n\t\t\tthrow err;\n\t\t}\n\t\tif ( arguments.length > 2 ) {\n\t\t\topts = arguments[ 2 ];\n\t\t\tif ( !isObject( opts ) ) {\n\t\t\t\tthrow new TypeError( format( 'invalid argument. Options argument must be an object. Value: `%s`.', opts ) );\n\t\t\t}\n\t\t\tif ( hasOwnProp( opts, 'prng' ) ) {\n\t\t\t\tif ( !isFunction( opts.prng ) ) {\n\t\t\t\t\tthrow new TypeError( format( 'invalid option. `prng` option must be a pseudorandom number generator function. Option: `%s`.', opts.prng ) );\n\t\t\t\t}\n\t\t\t\trand = opts.prng;\n\t\t\t} else {\n\t\t\t\trand = randu( opts );\n\t\t\t}\n\t\t} else {\n\t\t\trand = randu();\n\t\t}\n\t}\n\tif ( n === void 0 ) {\n\t\tprng = binomial2;\n\t}\n\telse {\n\t\tprng = binomial1;\n\t}\n\tsetReadOnly( prng, 'NAME', 'binomial' );\n\n\t// If we are provided an \"external\" PRNG, we don't support getting or setting PRNG state, as we'd need to check for compatible state value types, etc, entailing considerable complexity.\n\tif ( opts && opts.prng ) {\n\t\tsetReadOnly( prng, 'seed', null );\n\t\tsetReadOnly( prng, 'seedLength', null );\n\t\tsetReadWriteAccessor( prng, 'state', constantFunction( null ), noop );\n\t\tsetReadOnly( prng, 'stateLength', null );\n\t\tsetReadOnly( prng, 'byteLength', null );\n\t\tsetReadOnly( prng, 'toJSON', constantFunction( null ) );\n\t\tsetReadOnly( prng, 'PRNG', rand );\n\t} else {\n\t\tsetReadOnlyAccessor( prng, 'seed', getSeed );\n\t\tsetReadOnlyAccessor( prng, 'seedLength', getSeedLength );\n\t\tsetReadWriteAccessor( prng, 'state', getState, setState );\n\t\tsetReadOnlyAccessor( prng, 'stateLength', getStateLength );\n\t\tsetReadOnlyAccessor( prng, 'byteLength', getStateSize );\n\t\tsetReadOnly( prng, 'toJSON', toJSON );\n\t\tsetReadOnly( prng, 'PRNG', rand );\n\t\trand = rand.normalized;\n\t}\n\treturn prng;\n\n\t/**\n\t* Returns the PRNG seed.\n\t*\n\t* @private\n\t* @returns {PRNGSeedMT19937} seed\n\t*/\n\tfunction getSeed() {\n\t\treturn rand.seed;\n\t}\n\n\t/**\n\t* Returns the PRNG seed length.\n\t*\n\t* @private\n\t* @returns {PositiveInteger} seed length\n\t*/\n\tfunction getSeedLength() {\n\t\treturn rand.seedLength;\n\t}\n\n\t/**\n\t* Returns the PRNG state length.\n\t*\n\t* @private\n\t* @returns {PositiveInteger} state length\n\t*/\n\tfunction getStateLength() {\n\t\treturn rand.stateLength;\n\t}\n\n\t/**\n\t* Returns the PRNG state size (in bytes).\n\t*\n\t* @private\n\t* @returns {PositiveInteger} state size (in bytes)\n\t*/\n\tfunction getStateSize() {\n\t\treturn rand.byteLength;\n\t}\n\n\t/**\n\t* Returns the current pseudorandom number generator state.\n\t*\n\t* @private\n\t* @returns {PRNGStateMT19937} current state\n\t*/\n\tfunction getState() {\n\t\treturn rand.state;\n\t}\n\n\t/**\n\t* Sets the pseudorandom number generator state.\n\t*\n\t* @private\n\t* @param {PRNGStateMT19937} s - generator state\n\t* @throws {Error} must provide a valid state\n\t*/\n\tfunction setState( s ) {\n\t\trand.state = s;\n\t}\n\n\t/**\n\t* Serializes the pseudorandom number generator as a JSON object.\n\t*\n\t* ## Notes\n\t*\n\t* -   `JSON.stringify()` implicitly calls this method when stringifying a PRNG.\n\t*\n\t* @private\n\t* @returns {Object} JSON representation\n\t*/\n\tfunction toJSON() {\n\t\tvar out = {};\n\t\tout.type = 'PRNG';\n\t\tout.name = prng.NAME;\n\t\tout.state = typedarray2json( rand.state );\n\t\tif ( n === void 0 ) {\n\t\t\tout.params = [];\n\t\t} else {\n\t\t\tout.params = [ n, p ];\n\t\t}\n\t\treturn out;\n\t}\n\n\t/**\n\t* Returns a random number drawn from a binomial distribution with bound parameter values.\n\t*\n\t* @private\n\t* @returns {NonNegativeInteger} pseudorandom number\n\t*\n\t* @example\n\t* var r = binomial1();\n\t* // returns <number>\n\t*/\n\tfunction binomial1() {\n\t\treturn binomial0( rand, n, p );\n\t}\n\n\t/**\n\t* Returns a random number drawn from a binomial distribution.\n\t*\n\t* @private\n\t* @param {PositiveInteger} n - number of trials\n\t* @param {Probability} p - success probability\n\t* @returns {NonNegativeInteger} pseudorandom number\n\t*\n\t* @example\n\t* var r = binomial2( 20, 0.8 );\n\t* // returns <number>\n\t*/\n\tfunction binomial2( n, p ) {\n\t\tif (\n\t\t\tisnan( n ) ||\n\t\t\tisnan( p ) ||\n\t\t\t!isPositiveInteger( n ) ||\n\t\t\t!isProbability( p )\n\t\t) {\n\t\t\treturn NaN;\n\t\t}\n\t\treturn binomial0( rand, n, p );\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = factory;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Binomial distributed pseudorandom numbers.\n*\n* @module @stdlib/random-base-binomial\n*\n* @example\n* var binomial = require( '@stdlib/random-base-binomial' );\n*\n* var v = binomial( 20, 0.4 );\n* // returns <number>\n*\n* @example\n* var factory = require( '@stdlib/random-base-binomial' ).factory;\n*\n* var binomial = factory( 90, 0.8, {\n*     'seed': 297\n* });\n*\n* var v = binomial();\n* // returns <number>\n*/\n\n// MODULES //\n\nvar setReadOnly = require( '@stdlib/utils-define-nonenumerable-read-only-property' );\nvar binomial = require( './main.js' );\nvar factory = require( './factory.js' );\n\n\n// MAIN //\n\nsetReadOnly( binomial, 'factory', factory );\n\n\n// EXPORTS //\n\nmodule.exports = binomial;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar factory = require( './factory.js' );\n\n\n// MAIN //\n\n/**\n* Generates a binomially distributed random number.\n*\n* ## Method\n*\n* -   For \\\\(np < 10\\\\), the function generates Bernoulli random variates and returns their sum.\n* -   For \\\\(np \\geq 10\\\\), the function uses the [BTRD algorithm][@hormann:1993a].\n*\n* ## References\n*\n* -   Hörmann, Wolfgang. 1993. \"The generation of binomial random variates.\" _Journal of Statistical Computation and Simulation_ 46 (1-2): 101–10. doi:[10.1080/00949659308811496][@hormann:1993a].\n*\n* [@hormann:1993a]: http://dx.doi.org/10.1080/00949659308811496\n*\n* @name binomial\n* @type {PRNG}\n* @param {PositiveInteger} n - number of trials\n* @param {Probability} p - success probability\n* @throws {TypeError} `n` must be a positive integer\n* @throws {TypeError} `p` must be a probability\n* @returns {NonNegativeInteger} pseudorandom number\n*\n* @example\n* var r = binomial( 20, 0.8 );\n* // returns <number>\n*/\nvar binomial = factory();\n\n\n// EXPORTS //\n\nmodule.exports = binomial;\n"],"names":["isPositiveInteger","require$$0","isPrimitive","isProbability","require$$1","format","require$$2","validate_1","n","p","TypeError","pow","floor","sign","sqrt","abs","require$$3","ln","require$$4","correction","k","v","sample1","rand","i","sum","sample2","alpha","urvr","snpq","npq","rho","tmp","nm","nr","us","km","nk","vr","a","b","c","f","h","m","q","r","t","u","x","binomial","sample","setReadOnly","setReadOnlyAccessor","setReadWriteAccessor","isObject","isFunction","hasOwnProp","require$$5","constantFunction","require$$6","noop","require$$7","isnan","require$$8","require$$9","require$$10","randu","require$$11","factory","typedarray2json","require$$12","require$$13","validate","require$$14","binomial0","require$$15","factory_1","opts","prng","err","arguments","length","binomial2","binomial1","getSeed","getSeedLength","getState","setState","getStateLength","getStateSize","toJSON","normalized","seed","seedLength","stateLength","byteLength","state","s","out","name","NAME","params","NaN","lib"],"mappings":"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"}